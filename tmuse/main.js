// Generated by LiveScript 1.2.0
(function(){
  $(function(){
    var $in, $out, origin, CACHED, GET;
    $in = $('#input');
    $out = $('#output');
    origin = "http://127.0.0.1:8888/";
    window.id = 'tmuse';
    window.reset = function(){
      return $in.val('');
    };
    window.addEventListener("message", function(it){
      return window.input(it.data, false);
    });
    window.input = function(it){
      $in.val(it);
      return GET("a/" + it + ".json", function(arg$){
        var nodes, i$, len$, label, results$ = [];
        nodes = arg$.graph_json.nodes;
        $out.empty();
        for (i$ = 0, len$ = nodes.length; i$ < len$; ++i$) {
          label = nodes[i$].label;
          results$.push($out.append($('<li/>').append($('<a/>', {
            href: '#'
          }).text(label)).click(fn$)));
        }
        return results$;
        function fn$(){
          return window.output($(this).text());
        }
      });
    };
    window.output = function(it){
      if (window.muted) {
        return;
      }
      input(it);
      return window.top.postMessage(it, origin);
    };
    CACHED = {};
    return GET = function(url, data, onSuccess, dataType){
      var ref$;
      if (data instanceof Function) {
        ref$ = [null, onSuccess, data], data = ref$[0], dataType = ref$[1], onSuccess = ref$[2];
      }
      if (CACHED[url]) {
        return onSuccess(CACHED[url]);
      }
      return $.get(url, data, function(it){
        return onSuccess(CACHED[url] = it);
      }, dataType || 'json').fail(function(){});
    };
  });
}).call(this);
